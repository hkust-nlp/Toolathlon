# Cooking-Guidance Task

## 任务描述

这是一个烹饪指导任务，模拟家庭主妇需要准备晚餐的场景。

## 任务目标

1. **菜肴推荐**: Agent需要根据当前拥有的原材料(`ingredients.csv`)，推荐3道菜并保存到`cuisine.md`文件
2. **缺失分析**: 列出制作这些菜肴所需的缺失原材料
3. **购物清单**: 生成一份.csv格式的购物清单

## 文件结构

```
Cooking-Guidance/
├── docs/
│   ├── task.md                    # 任务描述（中文）
│   ├── agent_system_prompt.md    # Agent系统提示
│   └── user_system_prompt.md     # User系统提示
├── initial_workspace/
│   └── ingredients.csv           # 初始原材料清单
├── preprocess/
│   └── main.py                   # 预处理脚本（复制原材料文件）
├── evaluation/
│   ├── main.py                   # 主评估脚本
│   ├── check_log.py             # 检查对话日志
│   ├── check_local.py           # 检查生成的购物清单
│   └── check_remote.py          # 远程检查（空实现）
├── groundtruth_workspace/        # 真值工作区（空）
└── task_config.json             # 任务配置
```

## 使用的MCP服务器

- **filesystem**: 用于文件读写操作
- **howtocook**: 用于查询菜谱和食材信息

## 评估标准

### 1. 对话日志检查 (check_log.py)
- ✅ **三道菜推荐检查**: 验证是否提到了三道菜的推荐（菜肴词汇+数量词汇）
- ✅ **购物清单检查**: 验证是否提到了购物清单相关内容
- ✅ **缺失原材料检查**: 验证是否提到了缺失的原材料分析

**详细输出包括**:
- 找到的关键词列表
- 关键词出现的消息位置
- 每项检查的通过/失败状态
- 总体评估通过率

### 2. 本地文件检查 (check_local.py)
- ✅ **文件存在性检查**: 检查是否生成了购物清单CSV文件
- ✅ **菜肴提取验证**: 从cuisine.md文件中智能提取推荐的菜肴名称
- ✅ **菜谱真实性验证**: 使用howtocook API验证菜谱的真实性
- ✅ **食材需求分析**: 分析菜谱所需食材与当前原材料的差异
- ✅ **购物清单匹配度**: 验证购物清单对缺失食材的覆盖率是否达到80%以上

**详细输出包括**:
- 当前拥有的原材料清单
- 生成的购物清单内容
- 从cuisine.md文件中提取的推荐菜肴列表
- 菜谱验证结果（成功/失败）
- 每道菜的详细食材需求
- 已有食材 vs 缺失食材对比
- 购物清单与缺失食材的匹配分析
- 购物清单覆盖率计算

## 原材料清单

当前拥有的原材料包括：
- 鸡蛋 (4个)
- 土豆 (4个)
- 茄子 (2个)
- 蒜苗 (2根)
- 冬瓜 (500g)
- 瘦肉片/纯瘦肉 (400g)
- 五花肉/猪肉 (200g)
- 牛奶 (30ml)
- (干)辣椒 (50g)

## 技术实现

评估系统具有以下智能功能：

1. **菜名提取**: 使用正则表达式从cuisine.md文件中智能提取菜肴名称
2. **菜谱验证**: 调用howtocook API验证推荐菜肴的真实性
3. **食材分析**: 自动分析菜谱所需食材与现有食材的差异
4. **购物清单验证**: 检查生成的购物清单对缺失食材的覆盖率是否达到80%以上
5. **详细透明输出**: 提供完整的评估过程和结果详情

## 评估输出示例

评估系统会生成详细的报告，包括：

```
🍽️ COOKING-GUIDANCE 任务完整评估报告
================================================================================

对话日志内容检查
================================================================================
📊 助手回复消息数量: 1

🔍 检查结果:
1️⃣ 三道菜推荐检查: ✅ 已提及三道菜推荐
2️⃣ 购物清单检查: ✅ 已提及购物清单  
3️⃣ 缺失原材料检查: ✅ 已提及缺失原材料

📈 总体评估: 通过项目: 3/3 🎉 所有检查项目均通过！

COOKING-GUIDANCE 任务评估详细报告
================================================================================
📋 当前拥有的原材料 (9 种): 鸡蛋、土豆、茄子...
🛒 生成的购物清单 (6 种): 生抽、醋、韭菜...
🍽️ 从cuisine.md文件中提取的推荐菜肴 (3 道): 土豆丝炒肉、红烧茄子、冬瓜排骨汤

🔍 菜谱验证结果:
  • 成功找到菜谱: 1 道
  • ✅ 红烧茄子 - 找到有效菜谱

📊 食材分析结果:
  • 当前已有食材: 2 种
  • 缺失食材: 8 种

📈 购物清单覆盖率: 87.5% (7/8)
✅ 购物清单验证通过: 覆盖率 87.5% (≥80%)

最终评估结果汇总
================================================================================
✅ 对话日志检查: 通过
✅ 本地文件检查: 通过  
✅ 远程资源检查: 通过

📈 总体通过率: 3/3 (100.0%)
🎉 恭喜！所有评估项目均通过！
```

这个任务充分利用了MCP的能力，既测试了Agent的对话理解能力，也测试了其与外部工具的集成能力。评估过程完全透明，提供详细的验证步骤和匹配分析。