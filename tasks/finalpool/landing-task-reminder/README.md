今天我们有3位新员工入职，每位新员工的入职信息都在snowflake的数据库的。根据员工的所属组，自动生成培训任务清单（这里需要agent去读员工手册，是一个pdf，有默认公共培训任务和每个组的培训任务），发送邮件给员工所属邮箱。并将任务内容和计划完成日期自动更新到数据库。此外， 还需要检查当前日期已超过培训计划完成日期但任务状态仍为“未完成”的员工记录，像员工本人发送提醒邮件，格式为“Dear xxx, 你尚有如下入职培训任务未完成：xx\nxx\nxx\nxx 请尽快完成”并抄送其直属上司。


构建上述评测 Agent 任务的流程：

- 新建一个配置json
    - 3个新员工、20个老员工（其中4个还没有完成任务）、4个 manager对应4个组
    - 每个员工都有自己的任务完成状态
    - 任务的完成状态包括：未完成(新员工则所有任务都没有完成，老员工有部分过了ddl的任务未完成)、已完成(所有任务都完成)
    - 由于时间的动态性，我们还需要根据当前日期，来设置过了ddl的任务；例如：ddl是当前日期 - 10天，那么过了ddl的任务就是当前日期 - 10天之前的任务
        - 所有的时间都用负数来代替，表示当前时间 - 负数天数
        - 经理的入职时间用当前时间 - 1000左右的天数
        - 老员工的入职时间用当前时间 - 365天以上 1000天以下的天数
        - 新员工的入职时间用当前时间 - 0天，表示今天入职
    
    - 每个员工都有自己的直属上司, 每个员工都有自己的邮箱
        对manager来说，可以report给 boss

        table: employee-id name email report-to-(id)
        table: employee-id landing-date landing-task-assigned

    - 每个组都有自己的培训任务，培训任务包括：公共培训任务和每个组的培训任务，每组的任务和公共的任务table全都是是分开的，需要分开读取，结构如下
        table: task-id task-name employee-id create-date ddl finished-flag
- preprocess:
    - 读取这个配置json，删除之前的 db，然后将配置json写入到db
    - 生成一个员工手册，员工手册包括：公共培训任务和每个组的培训任务，
    - 具体的任务：
        - 公共培训任务：
            - 入职培训
            - 安全培训
            - 保密培训
            - 公司文化
            - 公司战略
        - Group-1（后台） 培训任务
            - 后台开发流程
            - 后台开发规范
            - 后台开发环境
        - Group-2（前端） 培训任务
            - 前端开发流程
            - 前端开发规范
            - 前端开发环境
        - Group-3（测试） 培训任务
            - 测试开发流程
            - 测试开发规范
            - 测试开发环境
        - Group-4（数据） 培训任务
            - 数据开发流程
            - 数据开发规范
            - 数据开发环境

- Evaluation:
    - 检查邮件是否发送给了员工本人、是否抄送了直属上司
    - 检查是否多发送了邮件
    - 检查邮件的内容
    - 检查db里三位新员工的任务是否被正确地添加
    - 检查db里是不是刚好新增了这些任务，没有多也没有少

