{
    "id": "weihao_ab_testing",
    "needed_mcp_servers": ["google-cloud", "filesystem"],
    "meta": {
        "description": "Automated A/B testing analysis for new homepage conversion rates",
        "difficulty": "medium",
        "estimated_time": "30-45 minutes",
        "tags": ["bigquery", "cloud-storage", "cloud-logging", "data-analysis", "ab-testing"],
        "requirements": [
            "Query BigQuery dataset ab_testing for A/B test conversion data", 
            "Calculate conversion rates for each scenario and overall",
            "Determine which version has higher overall conversion rate",
            "Create Cloud Storage bucket 'promo-assets-for-b' if version B wins",
            "Write structured log to abtesting_logging if version A wins or tie",
            "Export detailed conversion rate analysis to record.csv file with scenario breakdown"
        ],
        "learning_objectives": [
            "Working with BigQuery datasets for A/B test analysis", 
            "Implementing business logic for conversion rate comparison",
            "Creating Cloud Storage buckets conditionally",
            "Writing structured logs to Google Cloud Logging",
            "Data aggregation and statistical analysis"
        ]
    },
    "needed_local_tools": ["claim_done"],
    "evaluation_criteria": {
        "correctness": {
            "weight": 0.4,
            "metrics": [
                "Accurate calculation of conversion rates for both versions",
                "Correct identification of winning version",
                "Proper conditional logic for bucket creation vs logging"
            ]
        },
        "completeness": {
            "weight": 0.3,
            "metrics": [
                "All A/B testing data processed from BigQuery",
                "Correct action taken based on winning version",
                "record.csv file contains accurate scenario-level and overall conversion rates"
            ]
        },
        "code_quality": {
            "weight": 0.2,
            "metrics": [
                "Proper error handling and data validation",
                "Efficient data processing and aggregation",
                "Clear structured logging messages"
            ]
        },
        "mcp_usage": {
            "weight": 0.1,
            "metrics": [
                "Proper BigQuery queries via google-cloud MCP server",
                "Correct cloud storage operations",
                "Appropriate cloud logging usage"
            ]
        }
    },
    "success_threshold": {
        "minimum_accuracy": 0.9,
        "required_outputs": ["record.csv", "conditional_bucket_or_log"],
        "data_completeness": 0.95,
        "conversion_rate_tolerance": 0.1
    }
}